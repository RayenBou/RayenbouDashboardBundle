{% extends 'base.html.twig' %}

{% block title %}Ticket
{% endblock %}

{% block body %}
	<h1>Ticket</h1>

	<table class="table">
		<tbody>
			<tr>
				<th>Id</th>
				<td>{{ ticket.id }}</td>
			</tr>
			<tr>
				<th>Title</th>
				<td>{{ ticket.title }}</td>
			</tr>
			<tr>
				<th>Description</th>
				<td>{{ ticket.description }}</td>
			</tr>
			<tr>
				<th>CreatedAt</th>
				<td>{{ ticket.createdAt ? ticket.createdAt|date('Y-m-d H:i:s') : '' }}</td>
			</tr>

			<tr>
				<th>Domain</th>
				<td>{{ ticket.domain }}</td>
			</tr>
		</tbody>
	</table>
	<table>
		<tbody>
			{% for message in ticket.ticketMessages %}
				<tr>
					<td>{{ message.description }}</td>
					<td>{{ message.createdAt|date('d/m/Y H:i:s') }}</td>
					<td>{{ message.author }}</td>
				</tr>

			{% endfor %}
		</tbody>
	</table>
	{# <a href="{{ path('app_ticket_index') }}">back to list</a> #}
	<form action="{{ path('app_ticket_change_status', {'id': ticket.getId()}) }}" method="post">
		<input type="hidden" name="_token" value="{{ csrf_token('change_status' ~ ticket.getId()) }}">
		<button type="submit" class="main_button">{{ticket.status ? "ouvert": "ferm√©"}}</button>
	</form>
	{{ form_start(form) }}
	{{ form_widget(form) }}
	<button class='main_button'>envoyer</button>
	{{ form_end(form) }}
{# <a href="{{ path('app_ticket_edit', {'id': ticket.id}) }}">edit</a> #}

	{# {{ include('ticket/_delete_form.html.twig') }} #}
{% endblock %}
