{% extends 'base.html.twig' %}

{% block title %}Ticket index
{% endblock %}

{% block body %}
	<h1>Ticket index</h1>

	<table class="table">
		<thead>
			<tr>
				<th>Id</th>
				<th>Title</th>
				<th>Description</th>
				<th>CreatedAt</th>

				<th>Domain</th>
				<th>actions</th>
			</tr>
		</thead>
		<tbody>
			{% for ticket in tickets %}
				<tr>
					<td>{{ ticket.id }}</td>
					<td>{{ ticket.title }}</td>
					<td>{{ ticket.description }}</td>
					<td>{{ ticket.createdAt ? ticket.createdAt|date('Y-m-d H:i:s') : '' }}</td>

					<td>{{ ticket.domain }}</td>
					<td>
						<a href="{{ path('app_ticket_show', {'id': ticket.id}) }}">show</a>

					</td>
				</tr>
			{% else %}
				<tr>
					<td colspan="7">no records found</td>
				</tr>
			{% endfor %}
		</tbody>
	</table>

	<div>
		<h2>current User</h2>
		{% for user in apiUser %}

			{{user.id}}
			{{user.email}}

			<form method="post" action="{{ path('rayenbou_dashboard_user_delete', {'id': user.id}) }}" onsubmit="return confirm('Are you sure you want to delete this item?');">
				<input type="hidden" name="_token" value="{{ csrf_token('delete' ~ user.id) }}">
				<button class="main_button">Delete</button>
			</form>

		{% endfor %}

		{{form_start(form)}}{{form_widget(form)}}
		<button class='main_button'>Creer</button>
		{{form_end(form)}}


	</div>
{% endblock %}
